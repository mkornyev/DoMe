{% extends "doMe/base.html" %}

{% block page_specific_styles %}
<!-- Calendar widget scripts -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/css/tempusdominus-bootstrap-4.min.css" integrity="sha256-XPTBwC3SBoWHSmKasAk01c08M6sIA5gF5+sRxqak2Qs=" crossorigin="anonymous" />
{% endblock %}

{% block title %}{% block navtitle %}
	{{ list.title }} 
{% endblock %}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col">
            
            <!-- Workspaces Header -->
            <br>
            <p style='color: red; '>{{ error }}</p>
            <h1 style="display: inline;">{{list.title}}</h1>

            <!-- Sort dropdown -->
            <div class="dropdown">
              <button class="btn btn-outline-info dropdown-toggle float-right" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Sort By
              </button>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item {{default}}" href="{% url 'getList' id %}">List Order</a>
                <a class="dropdown-item {{priority}}" href="{% url 'getListPriority' id %}">Priority</a>
                <a class="dropdown-item {{date}}" href="{% url 'getListDate' id %}">Due Date</a>
              </div>
            </div>
            <p>{{ list.description }}</p><br>


            <div id="sortablelist" class="list-group">
              {% for item in items %}
                  <div class="list-group-item d-flex card item" data-id="{{ item.id }}" data-order="{{ item.order }}" id="l-{{item.priority}}">
                      <div class="card-body">
                          <h2 class="item-title">{{ item.title }} &nbsp;&nbsp;&nbsp;</h2>
                          <p class="item-description">{{ item.description }} &nbsp;&nbsp;&nbsp;</p>
                          <p class="item-author">{{ user.first_name|add:' '|add:user.last_name }}</p>
                          <p class="item-date">on {{ item.created_at }} | due on {{ item.dueDate }}</p>
                      </div>
                  </div>
              {% endfor %}
            </div>

            {% include 'doMe/_addListItem.html' %}

        </div>
	</div>
{% endblock %}

{% block page_specific_scripts %}
{% load static %}
<!-- Calendar widget scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.23.0/moment.min.js" integrity="sha256-VBLiveTKyUZMEzJd6z2mhfxIqz3ZATCuVMawPZGzIfA=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/js/tempusdominus-bootstrap-4.min.js" integrity="sha256-z0oKYg6xiLq3yJGsp/LsY9XykbweQlHl42jHv2XTBz4=" crossorigin="anonymous"></script>

<!-- SortableJS CDN -->
<script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>

<script src="{% static 'doMe/itemScripts.js' %}"></script>
{% endblock %}